// author: runoob
jQuery(document).ready(function ($){
	searchKey = ''
	//搜索
	$(".search-reveal").click(function() {
        $(".row-search-mobile").slideToggle("400",
        function() {});
    });
	
	$('.placeholder').on('blur',function(){
	    if($(this).val() == ""){
			if(searchKey) {
				$(this).val(searchKey);
			} else {
				$(this).val("搜索……");
			}
	     	
	     }
	});
	$('.placeholder').on('focus',function(){
	 if($(this).val() == '搜索……') {
	      $(this).val('');
	   }
	});
	

	// 侧栏
	$(".sidebar-tree > ul > li").hover(function(){
		$(this).addClass("selected");
		$(this).children("a:eq(0)").addClass("h2-tit");
		$(this).children("ul").show();
	},function(){
		$(this).removeClass("selected");
		$(this).children(".tit").removeClass("h2-tit");
		$(this).children("ul").hide();
	})

	// 首页导航
	$("#index-nav li").click(function(){
		$(this).find("a").addClass("current");
		$(this).siblings().find("a").removeClass("current");
		id = $(this).find("a").attr("data-id");
		$(".sub-navigation-articles").hide();
		if(id == 'index') {
			
		}
		if(id == 'note') {
			
		} else if(id == 'tool') {

		} else if(id == 'quiz') {
			$("#tool").hide();
			$("#manual").hide();
			$("#" + id).show();
			$(".sub-navigation-articles").show();
		} else if(id == 'manual') {
			$("#tool").hide();
			$("#quiz").hide();
			$("#" + id).show();
			$(".sub-navigation-articles").show();
		} else {
			$("#tool").hide();
			$("#quiz").hide();
			$("#manual").hide();
		}
    });

    $("#note-nav li").each(function(){
        if(window.location.pathname == $(this).find("a").attr("href")) {
        	$(this).find("a").addClass("current");
        	return false;
        }
  	});
	$("#cate0").click(function() {
		$(".codelist-desktop").show();
	})
	$(".design").click(function() {
		id = $(this).prop("id");
		$("." + id).show();
		$("." + id).siblings().hide();
	})
	//移动设备点击链接	
	$('a').on('click touchend', function(e) {
		if(screen.availHeight==548 && screen.availHeight==320) {
	  		var el = $(this);
	  		var link = el.attr('href');
	  		window.location = link;
  		}
	});
	
	$(window).scroll(function () {
		var _stop = $(window).scrollTop();
		top_of_element = $("#footer").offset().top;
		bottom_of_element = $("#footer").offset().top + $("#footer").outerHeight();
		bottom_of_screen = $(window).scrollTop() + $(window).innerHeight();
		top_of_screen = $(window).scrollTop();
		// 检测移动设备
		
		if($("#pull").is(":visible")){
			_mobileFlag = true;
		} else {
			_mobileFlag = false;
		}
		if( /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ) {
			_mobileFlag = true;
		}

	    if(_stop>=100) {
	        $(".go-top").fadeIn();
	         if ($('#htmlfeedback-container').length){
	         	if( /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ) {
						
				} else {
	         		$("#htmlfeedback-container").show();
	         	}
	         }
	    }else {
	    	$(".go-top").fadeOut();
	    }
	});

	$(".go-top").click(function(event){	
		$('html,body').animate({scrollTop:0}, 100);
		return false;
	});

});

function createCookie(name,value,days) {
    var expires = "";
    if (days) {
        var date = new Date();
        date.setTime(date.getTime() + (days*24*60*60*1000));
        expires = "; expires=" + date.toUTCString();
    }
    document.cookie = name + "=" + value + expires + "; path=/";
}

function readCookie(name) {
    var nameEQ = name + "=";
    var ca = document.cookie.split(';');
    for(var i=0;i < ca.length;i++) {
        var c = ca[i];
        while (c.charAt(0)==' ') c = c.substring(1,c.length);
        if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
    }
    return null;
}
function eraseCookie(name) {
    createCookie(name,"",-1);
}
